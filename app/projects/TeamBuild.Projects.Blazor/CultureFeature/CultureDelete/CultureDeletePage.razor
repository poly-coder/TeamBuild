@using TeamBuild.Projects.Application.CultureFeature

@attribute [Route(CultureRoutes.DeleteRoute)]

@inject NavigationManager Nav
@inject ICultureCommandService CommandService
@inject ICultureQueryService QueryService

<TbMudPage Title="@CultureRoutes.DeleteTitle"
           Breadcrumbs="@CultureRoutes.DeleteBreadcrumbs(CultureId)">
    <TopBar>
        @if (load?.ShowReload == true)
        {
            <TbMudReloadButton OnClick="() => load?.Execute()"/>
        }
        <TbMudCopyButton CopyJson="@JsonContent" Label="Copy Json"/>
        <TbMudGoToDetailsButton Href="@CultureRoutes.Details(CultureId)"/>
        <TbMudGoToEditButton Href="@CultureRoutes.Edit(CultureId)"/>
    </TopBar>

    <ChildContent>
        @if (load is not null)
        {
            <TbMudLoadingBar IsLoading="@load.IsRunning" />

            @if (load.TryGetException(out var loadException))
            {
                <TbMudExceptionAlert Exception="loadException" />
            }
        }

        @if (culture is not null && load is not null && delete is not null)
        {
            <CultureDeleteView IsSubmitting="@delete.IsRunning" Culture="@culture"
                               SubmitException="@delete.Exception"
                               OnSubmit="f => delete.Execute(f)" />
        }
    </ChildContent>
</TbMudPage>
